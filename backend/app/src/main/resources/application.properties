spring.application.name=app

wto.api.key=c07fac8f1db044d39c6e7ca9d22fea5d
google.api.key=AIzaSyD1G7Uubavev-XuUtVtYQYykv_dNRMr5gA
google.search.engine.id=75e65fba5ce964d29

spring.datasource.url=${SPRING_DB_URL}
spring.datasource.username=${SPRING_DB_USERNAME}
spring.datasource.password=${SPRING_DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

logging.level.root=INFO
logging.level.persistence=DEBUG
logging.level.auth=DEBUG

# JWT/Auth configuration (ensure to override via env in production)
jwt.secret=${JWT_SECRET}
jwt.issuer=${JWT_ISSUER}
jwt.audience=${JWT_AUDIENCE}
jwt.accessTtlSeconds=${ACCESS_TOKEN_TTL_SECONDS}
sessions.refreshTtlSeconds=${REFRESH_TOKEN_TTL_SECONDS}

# Google OAuth (ID token verification)
# Provide a default empty value so tests/boot don't fail if env var isn't set
google.oauth.clientId=${GOOGLE_OAUTH_CLIENT_ID:}

# CORS: set your frontend URL
# app.cors.allowedOrigin=${FRONTEND_ORIGIN:http://localhost:3000}
app.cors.allowedOrigin=${FRONTEND_ORIGIN:https://www.teamcmiggwpholidaymood.fun}

# Frontend base URL used for links in emails (e.g., password reset)
app.frontend.url=${FRONTEND_URL:https://www.teamcmiggwpholidaymood.fun}

# Cookie settings (tune for dev/prod)
# For local HTTP dev, keep secure=false and use SameSite=Lax so the cookie is accepted and sent on top-level navigations.
# In production behind HTTPS, set app.cookies.secure=true and you may set SameSite=None for cross-site usage.
# app.cookies.secure=${COOKIE_SECURE:true}
# app.cookies.sameSite=${COOKIE_SAMESITE:Lax}
app.cookies.secure=${COOKIE_SECURE}
app.cookies.sameSite=${COOKIE_SAMESITE}

# Dev-only: allow plaintext password fallback when legacy rows have no hash (DO NOT ENABLE IN PROD)
# app.auth.allowPlaintext=${ALLOW_PLAINTEXT_AUTH:false}
# app.auth.devEndpoints=true

# Auth datasource (dedicated) points to the accounts database.
# Configure these via environment variables at runtime to avoid committing secrets:
  # AUTH_DB_URL=jdbc:mysql://<host>:<port>/accounts
  # AUTH_DB_USERNAME=<username>
  # AUTH_DB_PASSWORD=<password>
# These map to the @ConfigurationProperties prefix "auth.datasource" in config.AuthDataSourceConfig
# Example (DO NOT COMMIT SECRETS):
auth.datasource.url=${AUTH_DB_URL}
auth.datasource.username=${AUTH_DB_USERNAME}
auth.datasource.password=${AUTH_DB_PASSWORD}
auth.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# show useful details in /error responses & logs
server.error.include-message=always
server.error.include-stacktrace=always

# verbose logs around swagger generation and JSON mapping
logging.level.org.springdoc=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.com.fasterxml.jackson.databind=DEBUG

# (optional) narrow scan to speed isolation; start with a tiny package and expand later
# springdoc.packagesToScan=com.example.ping

#exchange rate keys
exchange.api.key=fd2197d29b3e555e51988fc4

# Character Encoding Configuration
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# JSON UTF-8 Support
spring.jackson.serialization.WRITE_DATES_AS_TIMESTAMPS=false

# --- Mail (AWS SES SMTP) ---
# These should be provided via environment variables in production.
# Example SES SMTP endpoint for ap-southeast-1: email-smtp.ap-southeast-1.amazonaws.com
# We provide safe defaults so the app boots even when mail env vars are absent.
spring.mail.host=${SPRING_MAIL_HOST:${MAIL_HOST:email-smtp.ap-southeast-2.amazonaws.com}}
spring.mail.port=${SPRING_MAIL_PORT:${MAIL_PORT:587}}
spring.mail.username=${SPRING_MAIL_USERNAME:${MAIL_USERNAME:AKIATXPUTQ74OONCHF6I}}
spring.mail.password=${SPRING_MAIL_PASSWORD:${MAIL_PASSWORD:BJGOcFd+L87Jq3HNRZCFRAZ6Lee3qFVEIPF/y4pasK4g}}
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_SMTP_AUTH:${SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH:true}}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_STARTTLS_ENABLE:${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE:true}}
# The From address must be a verified identity in SES
app.mail.from=${MAIL_FROM:${APP_MAIL_FROM:noreply@teamcmiggwpholidaymood.fun}}

# Optional: if you want to completely disable mail auto-config during setup, uncomment:
# spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration